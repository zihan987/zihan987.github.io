<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>论文分享：基于场景的自动驾驶汽车自动化安全测试的方法 | 阿chai带你学AI</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://zihan987.github.io/favicon.ico?v=1629190713972">
<link rel="stylesheet" href="https://zihan987.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="今天给大家分享一篇加州大学伯克利学校的paper，文中以LGSVL仿真器为例，提出一种基于场景的自动驾驶汽车自动化安全测试的方法，尤其针对AI模组模拟仿真评估和真实驾驶测试。

可以通过根据碰撞数据分析和自然驾驶数据分析创建的场景来构建测试..." />
    <meta name="keywords" content="paper分享" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://zihan987.github.io">
        <img src="https://zihan987.github.io/images/avatar.png?v=1629190713972" class="site-logo">
        <h1 class="site-title">阿chai带你学AI</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            迷你小窝
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            推文整理
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签分类
          </a>
        
      
        
          <a href="https://zihan987.github.io" class="site-nav">
            资源整理
          </a>
        
      
        
          <a href="https://zihan987.github.io/post/a-chai-jian-jie" class="site-nav">
            关于阿chai
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/zihan987" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      小镇青年，不偷电瓶，chai哩chai气
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/zihan987" target="_blank">紫涵</a> | <a class="rss" href="https://zihan987.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">论文分享：基于场景的自动驾驶汽车自动化安全测试的方法</h2>
            <div class="post-date">2021-08-17</div>
            
              <div class="feature-container" style="background-image: url('https://zihan987.github.io/post-images/lun-wen-fen-xiang-ji-yu-chang-jing-de-zi-dong-jia-shi-qi-che-zi-dong-hua-an-quan-ce-shi-de-fang-fa.png')">
              </div>
            
            <div class="post-content" v-pre>
              <p>今天给大家分享一篇加州大学伯克利学校的paper，文中以LGSVL仿真器为例，提出一种基于场景的自动驾驶汽车自动化安全测试的方法，尤其针对AI模组模拟仿真评估和真实驾驶测试。</p>
<!-- more -->
<p>可以通过根据碰撞数据分析和自然驾驶数据分析创建的场景来构建测试集，这些场景利用人类驾驶数据来生成测试场景。</p>
<p>paper链接：<a href="https://www.aliyundrive.com/s/Wvq56JtXXRA">https://www.aliyundrive.com/s/Wvq56JtXXRA</a></p>
<p>ASAM规定了ADAS仿真场景准：<strong>OpenDRIVE</strong>、<strong>OpenSCENARIO</strong>、<strong>OpenCRG</strong>。分别对应静态路网、动态场景、路面材质。三者联合组成专用ADAS测试的场景库。</p>
<h3 id="1-仿真工具">1. 仿真工具</h3>
<p><strong>OpenSCENARIO</strong> 定义了一种文件格式，基于可扩展标记语言 (extensible markup language，XML)描述驾驶和交通模拟器的动态内容。</p>
<p>伯克利提出一种高级语言<strong>SCENIC</strong>，对比<strong>M-SDL</strong>可测场景描述语言是最近的一种类似于 SCENIC 更高级 DSL，但对于概率、几何建模的支持不如<strong>SCENIC</strong>。</p>
<p>伯克利开源<strong>VERIFAI</strong>工具包，提供了一个统一框架来设计和分析基于AI/ML的cyber-physical系统，VERIFAI 首先明确定义参数范围，或可以用SCENIC 语言来参数化感兴趣的环境空间和系统配置。工具包的地址如下。</p>
<p><a href="https://link.zhihu.com/?target=https%3A//github.com/lgsvl/simulator">https://link.zhihu.com/?target=https%3A//github.com/lgsvl/simulator</a></p>
<h3 id="2-仿真步骤">2. 仿真步骤</h3>
<figure data-type="image" tabindex="1"><img src="https://zihan987.github.io/post-images/1629190605780.png" alt="" loading="lazy"></figure>
<h4 id="a-环境构建">a. 环境构建</h4>
<p>使用LGSVL仿真作为仿真场景的搭建软件，环境通过收集数百GB的激光雷达点云、相机图像和位置数据创建，所有的数据转化为3D网格。网格被加载到 LGSVL 模拟器去注释可行驶区域的细节，包括车道线、人行横道、交通标志等。</p>
<figure data-type="image" tabindex="2"><img src="https://zihan987.github.io/post-images/1629190620236.png" alt="" loading="lazy"></figure>
<p>上图为场景的BEV图，自驾车在十字路口右转，遇到一个犹豫不决地过马路的行人，自动驾驶系统控制车辆直接通过。</p>
<h4 id="b仿真脚本">b.仿真脚本</h4>
<p>如下为测试场景编码的<strong>SCENIC</strong>程序：</p>
<pre><code class="language-python">ego = TgoCar at 38.6 @ 183.9,
			facing 10 deg relative to roadDirection,
			with behavior DriverTo(40 @ 225.2)
ped = Pedestrian at 19.782 @ 225.680,
			facting 90 deg relative to roadDirection,
  		with behavior hesitate,
      with startDelay (7, 15),
      with walkDistance (4, 7),
      with hesitateTime (1, 3)
</code></pre>
<h4 id="c场景生成">c.场景生成</h4>
<p>定义SCENIC 程序之后，用 VERIFAI 来伪造场景，从分布中采样参数，在 LGSVL 模拟器中运行相应测试，并监视违反“安全”规范的情况。 一共生成1294 个测试用例，其中 2% 违反“安全”规范。 VERIFAI 的误差表存储所有此类情况的参数值，以及规范的定量满意度值；实验中将 VERIFAI 配置为存储安全运行，并且区分稳健安全的运行和几乎事故的运行。</p>
<h3 id="3实验数据">3.实验数据</h3>
<p>测试车是 林肯 MKZ 混合动力车，用**DataSpeed **线控功能和多个传感器进行增强，包括一个 <strong>Velodyne VLS-128 LiDAR</strong>、三个USB 摄像头和一个RTK  Novatel PwrPak7 双天线 GPS/IMU，保证 2 厘米的位置精度。 使用GPU GTX-1080TI的 x86 工控机，采用开源 Apollo 3.5自动驾驶软件进行测试。</p>
<p>为了帮助track testing的实现，固定自驾车和行人的初始位置和方向，并将行人轨迹定义为具有 3 个参数的直线：delay-过马路的延迟时间、distance-犹豫前行走距离和time-犹豫的时间。</p>
<p>如图是Satisfaction value，关于延迟delay和距离distance的函数：</p>
<figure data-type="image" tabindex="3"><img src="https://zihan987.github.io/post-images/1629190663538.png" alt="" loading="lazy"></figure>
<p>其中可以看到两个明显的聚类，左下方和右上方。为此选择了7个测试用例，两个失败（不安全），两个成功（安全）和3个中间（勉强安全）。</p>
<p>在 GoMentum 执行 7 个测试用例，其参数如表所示。</p>
<figure data-type="image" tabindex="4"><img src="https://zihan987.github.io/post-images/1629190675289.png" alt="" loading="lazy"></figure>
<p>对每个测试场景进行了多次运行，总共获得了 23 次运行。</p>
<figure data-type="image" tabindex="5"><img src="https://zihan987.github.io/post-images/1629190688683.png" alt="" loading="lazy"></figure>
<p>橘黄色标注显示是违反“安全”的运行，而白色行满足“安全”。 突出显示行的颜色表示不安全行为的程度：红色代表碰撞，橙色代表在视觉上归类为接近碰撞，黄色表示违反“安全但不是接近碰撞” 。</p>
<p>下图是是两个测试用例的轨迹：track test和5次再仿真，自驾车（绿色/蓝色）和行人（橙色和黄色）的轨迹</p>
<figure data-type="image" tabindex="6"><img src="https://zihan987.github.io/post-images/1629190703503.png" alt="" loading="lazy"></figure>
<p>模拟轨迹和真实轨迹显示重叠很多，但也存在差异：例如，尽管希望模拟的自驾车，从真实轨迹相同的位置开始，但阿波罗系统拒绝从该位置开始行驶，不得不对其进行略微调整。 更有趣的是，模拟的自驾车转弯比真实的更急，可能是模拟器对上坡驾驶的影响不精确建模造成。 最后，5 个模拟紧密聚集，但并不完全相同，这表明即使是单个测试用例也可以产生一系列不同的模拟轨迹。</p>
<figure data-type="image" tabindex="7"><img src="https://zihan987.github.io/post-images/1629190712039.png" alt="" loading="lazy"></figure>
<p>上表是是真实和重仿真轨迹之间的平均距离：<strong>Skorokhod metric</strong>测量两个定时轨迹的最坏情况偏差，可用于证明一致性，即<strong>Skorokhod metric</strong>显示的模拟轨迹与真实轨迹之间界限，允许从模拟到现实的迁移；<strong>Dynamic Time Warping (DTW) distance</strong>则给出整个轨迹而不是最坏点的平均相似性度量。</p>
<h3 id="参考链接">参考链接</h3>
<p>1.<a href="https://github.com/lgsvl/simulator">https://github.com/lgsvl/simulator</a></p>
<p>2.<a href="https://www.bianchengquan.com/article/219836.html">https://www.bianchengquan.com/article/219836.html</a></p>
<p>3.<a href="https://zhuanlan.zhihu.com/p/398051316">https://zhuanlan.zhihu.com/p/398051316</a></p>
<p>4.<a href="https://arxiv.org/abs/2003.07739">https://arxiv.org/abs/2003.07739</a></p>
<p>5.<a href="https://link.zhihu.com/?target=http%3A//bit.ly/GoM">https://link.zhihu.com/?target=http%3A//bit.ly/GoM</a></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://zihan987.github.io/tag/4Kn4sEv-1/" class="tag">
                    paper分享
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://zihan987.github.io/post/raspberry-pico-jiao-cheng/">
                  <h3 class="post-title">
                    Raspberry Pico教程
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>




  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: 'a40607f1d70a0647fef5',
        clientSecret: '12cc803752e081722178f5b0356f8fc61fe8a607',
        repo: 'zihan987.github.io',
        owner: 'zihan987',
        admin: ['zihan987'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
